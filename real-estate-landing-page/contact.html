<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Contact Page</title>

    <!-- ✅ Bootstrap 5 CDN -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>

    <!-- Font Awesome CDN -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css">

    <!-- style  -->
    <link rel="stylesheet" href="./css/style.css">

    <!-- toster links   -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/toastify-js/src/toastify.min.css">
    <script src="https://cdn.jsdelivr.net/npm/toastify-js"></script>


</head>

<body class="body">
    <!-- <div class="container"> -->

    <nav class="navbar">
        <div class="brand">
            <h2 class="brand-logo">Real Estate</h2>
        </div>
        <div class="hamburger" id="hamburger">
            <span></span>
            <span></span>
            <span></span>
        </div>
        <div class="number" id="navMenu">
            <h3><i class="fa-solid fa-phone"></i> +1 (555) 123-4567</h3>
            <div> <a href="./index.html" class="modal-btn btn" style="margin-left: 20px;">Back</a></div>
            <!-- <div> <button class="btn">Schedule Visit</button></div> -->
        </div>
    </nav>

    <div class="contact-property-detail-page">
        <div class="modal-image contact-page-img">
            <img id="ContactPropertyImage" src="./images/property-1.jpg" alt="property">
        </div>
        <div class="property-detail-content">
            <div class="modal-location-flex">
                <div>
                    <div class="modal-location">
                        <h4 id="ContactPropertyType">
                            <i class="fa-solid fa-magnifying-glass"></i>
                            Luxury Properties
                        </h4>
                        <h4 id="ContactPropertyLocation">
                            <i class="fa-solid fa-location-dot"></i>
                            Downtown
                        </h4>
                    </div>
                    <h2 id="ContactPropertyTitle">Modern Luxury Apartment</h2>
                </div>
                <div class="info-item">
                    <span id="ContactPrice" class="price">$850,000</span>
                </div>
            </div>
            <div class="contact-page-info">
                <div class="info-item">
                    <i class="fa-solid fa-bed"></i>
                    <!-- <p>3-Bedrooms</p> -->
                    <span id="Contactcategory"></span>
                </div>
                <div class="info-item">
                    <i class="fa-solid fa-shower"></i>
                    <!-- <p>2-Bathrooms</p> -->
                    <span id="ContactBathrooms"></span>
                </div>
                <div class="info-item">
                    <i class="fa-solid fa-ruler"></i>
                    <p><strong>Area</strong></p>
                    <span id="ContactSize">24,000 sq ft</span>
                </div>

            </div>
            <!-- <h3>Description</h3> -->
            <p id="ContactPropertyDescription">This stunning modern luxury apartment offers an unparalleled living
                experience in the heart of downtown. Featuring floor-to-ceiling windows, premium finishes, and
                breathtaking panoramic city views. The open-concept design includes a gourmet kitchen with
                top-of-the-line appliances, spacious living areas, and a master suite with spa-like bathrooms.
                Building
                amenities include 24/7 concierge, fitness center, rooftop terrace, and secure parking.</p>

            <!-- <h3>Key Features</h3> -->
            <p id="ContactPropertyKeyFeatures" style="overflow-wrap: anywhere; ">
                <!-- <ul class="key-feature-ul">
                <li>Floor-to-ceiling windows</li>
                <li>Master suite with walk-in closet</li>
                <li>Smart home technology</li>
                <li>Fitness center access</li>
                <li>Secure parking</li>
                <li>Gourmet kitchen with premium appliances</li>
                <li>Spa-like bathrooms</li>
                <li>24/7 concierge service</li>
                <li>Rooftop terrace</li>
            </ul> -->
            </p>




        </div>
    </div>

    <section class="contact-section">
        <div class="contact-content">
            <h3>Enter your Details</h3>
            <form id="contactForm">
                <div class="contact-form">

                    <div class="mb-3">
                        <label class="form-label">Full Name</label>
                        <input type="text" class="form-control" name="fullname" required>
                    </div>

                    <div class="mb-3">
                        <label class="form-label">Email</label>
                        <input type="email" class="form-control" name="email" required>
                    </div>

                    <div class="mb-3">
                        <label class="form-label">Phone Number</label>
                        <input type="text" class="form-control" name="phonenumber" required>
                    </div>

                    <div class="mb-3">
                        <label class="form-label">City</label>
                        <input type="text" class="form-control" name="city" required>
                    </div>

                    <div class="mb-3">
                        <label class="form-label">Preferred Property Type</label>
                        <input type="text" class="form-control" name="property_type" required>
                    </div>

                    <div class="mb-3">
                        <label class="form-label">Budget Range</label>
                        <input type="text" class="form-control" name="budget" required>
                    </div>

                    <div class="mb-3">
                        <label class="form-label">Purpose of Buying</label>
                        <input type="text" class="form-control" name="purpose" required>
                    </div>

                    <div class="mb-3">
                        <label class="form-label">Preferred Location / Area</label>
                        <input type="text" class="form-control" name="location" required>
                    </div>

                    <div class="mb-3">
                        <label class="form-label">Message</label>
                        <input type="text" class="form-control" name="message" required>
                    </div>

                    <div class="mb-3">
                        <label class="form-label">Best Time to Contact</label>
                        <input type="text" class="form-control" name="contact_time" required>
                    </div>
                    <input type="hidden" name="property_id" id="property_id">

                </div>

                <div class="modal-actions">
                    <button type="submit" class="modal-btn btn">Contact</button>
                </div>

            </form>

        </div>
    </section>

    <!-- Footer section  -->
    <footer class="footer">
        <div class="footer-top">

            <div class="footer-1 footer-about">
                <h4>Real Estate</h4>
                <p>Your trusted partner in finding the perfect property. With over 15 years of experience, we're
                    here to
                    help you every step of the way.</p>
            </div>

            <div class="footer-1">
                <h4>Quick Links</h4>
                <ul class="footer-ul">
                    <li><a href="#">About Us</a></li>
                    <li><a href="#">Our Team</a></li>
                    <li><a href="#">Services</a></li>
                    <li><a href="#">Testimonials</a></li>
                    <li><a href="#">Blog</a></li>
                </ul>
            </div>

            <div class="footer-1">
                <h4>Property Types</h4>
                <ul class="footer-ul">
                    <li><a href="#">Apartments</a></li>
                    <li><a href="#">Family Homes</a></li>
                    <li><a href="#">Luxury Villas</a></li>
                    <li><a href="#">Commercial</a></li>
                    <li><a href="#">Land & Plots</a></li>
                </ul>
            </div>

            <div class="footer-1">
                <h4>Contact Us</h4>
                <p>123 Real Estate Ave <br> New York, NY 10001 </p>
                <p><i class="fa-solid fa-phone"></i> +1 (555) 123-4567</p>
                <p><img src="./images/mail.png" alt="mail"> contact@realestate.com</p>
            </div>

        </div>

        <div class="footer-bottom">
            <p>© 2024 Real Estate. All rights reserved.</p>
            <div class="footer-bottom-a">
                <a href="#">Privacy Policy</a>
                <a href="#">Terms of Service</a>
                <a href="#">Cookie Policy</a>
            </div>
        </div>
    </footer>

    <!-- </div> -->
    <script src="./js/script.js"></script>



    <script>

function getPropertyIdFromURL() {
    const params = new URLSearchParams(window.location.search);
    return params.get("property_id");
}

const propertyId = getPropertyIdFromURL();



        document.addEventListener("DOMContentLoaded", async () => {
            const params = new URLSearchParams(window.location.search);
            const id = params.get("id");
            console.log("Property ID:", id);

            if (!id) return;

            const base_url = "http://localhost/real_estate_dashboard/admin";

            try {
                // Fetch property detail
                const res = await fetch(`${base_url}/get-property-by-id.php?id=${id}&t=${Date.now()}`);
                const property = await res.json();

                if (!property || property.error) return;

                // Fill UI
                document.getElementById("ContactPropertyImage").src = property.thumbnail;
                document.getElementById("ContactPropertyTitle").textContent = property.title;
                document.getElementById("ContactPropertyType").innerHTML = `<i class="fa fa-search"></i> ${property.property_type}`;
                document.getElementById("ContactPropertyLocation").innerHTML = `<i class="fa fa-location-dot"></i> ${property.location}`;
                document.getElementById("ContactPropertyDescription").textContent = property.description;
                document.getElementById("ContactPropertyKeyFeatures").innerHTML = property.content;
                document.getElementById("Contactcategory").textContent = property.category + " - Bedrooms";
                document.getElementById("ContactBathrooms").textContent = property.bathroom + " - Bathrooms";
                document.getElementById("ContactSize").textContent = property.area + " sq ft";
                document.getElementById("ContactPrice").textContent = "$" + Number(property.price).toLocaleString();

                // Fill hidden form fields
                document.getElementById("property_id").value = id;
                document.getElementById("property_type").value = property.property_type;

            } catch (err) {
                console.error("Fetch error:", err);
            }
        });
///////////////



//////////////////
        // js for contact form to send data to save-contact.php through fetch api //
        // Handle Form Submit
        document.getElementById("contactForm").addEventListener("submit", async function (e) {
            e.preventDefault();

            const formData = new FormData(this);

            try {
                const res = await fetch("http://localhost/real_estate_dashboard/admin/save-contact.php", {
                    method: "POST",
                    body: formData
                });

                const result = await res.json();

                if (result.status === "success") {
                    showToastNotification("Request sent ! Agent will contact you soon.", "success");
                    this.reset();
                } else {
                    showToastNotification(result.message, "error");
                }

            } catch (err) {
                showToastNotification("Network Error", "error");
            }
        });
    </script>




</body>

</html>